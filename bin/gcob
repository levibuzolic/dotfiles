#!/bin/sh
#
# FZF Previous branches

gcob() {
  local format branch branches
  format="%(committerdate:relative)\\%(color:green)%(refname:short)%(color:reset)\\%(HEAD)\\%(color:yellow)%(objectname:short)%(color:reset) %(upstream:trackshort)\\%(contents:subject)"
  branches=$(git for-each-ref --format="$format" --sort=-committerdate refs/heads/ | column -t -s "\\") &&
  branch=$(echo "$branches" | fzf --ansi --height=30) &&
  git checkout $(echo "$branch" | awk '{print $4}')
}

# Use gcob when no args supplied to gco
gco() {
  if [ $# -eq 0 ]; then
    gcob
  else
    git checkout "$@"
  fi
}
